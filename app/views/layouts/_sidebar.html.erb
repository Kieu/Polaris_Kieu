<div id="sidebar">
  <div id="clienetlist_box">
    <dl>
      <dt></dt>
      <dd>
        <form action="#" method="get" id="searchform" name="searchform">
          <input type="text" placeholder="検索" id="keywords" name="keywords" maxlength="255">
          <img id="searchBtn" name="searchBtn" alt="検索" src="/assets/img_loupe.gif">
        </form>
      </dd>
    </dl>
    <div style="border-top:1px solid #c1c1c1;"></div>
    <% if params[:controller] == "clients" %>
        <div id="clients_list">
          <table class="sidebar">
            <%
             if object && object.count >0
             object.each_with_index do |client, index| %>
                <tr>
                  <th class="edit"><%= link_to "", "#{edit_client_path(client)}", class: "edit", id: "edit#{client.id}" if current_user.super? %></th>
                  <% if params[:action] == "index" %>
                      <% if (params[:client_id] && client.id == params[:client_id].to_i) || (!params[:client_id] && index == 0) %>
                          <td><%= link_to short_name(client.client_name), "javascript:void(0)", class: "client_name active", id: "#{client.id}", onclick: "reloadFlex('.newTable06', '#{get_promotions_list_clients_path}?id=#{client.id}', '##{client.id}', '.client_name', '#client_name', #{Settings.MAX_LENGTH_NAME})" %>
                          	<%= link_to client.client_name, "javascript:void(0)", class: "client_name_search", id: "search#{client.id}" %>
                          	
                          </td>
                      <% else %>
                          <td><%= link_to short_name(client.client_name), "javascript:void(0)", class: "client_name", id: "#{client.id}", onclick: "reloadFlex('.newTable06', '#{get_promotions_list_clients_path}?id=#{client.id}', '##{client.id}', '.client_name', '#client_name', #{Settings.MAX_LENGTH_NAME})" %>
                              <%= link_to client.client_name, "javascript:void(0)", class: "client_name_search", id: "search#{client.id}" %>
                          		
                          </td>
                      <% end %>
                  <% else %>
                      <% if (params[:id] && client.id == params[:id].to_i) || (!params[:id] && index == 0) %>
                          <td><%= link_to short_name(client.client_name), "#{clients_path(client_id: client.id)}", class: "client_name active", id: "#{client.id}" %></td>
                      <% else %>
                          <td><%= link_to short_name(client.client_name), "#{clients_path(client_id: client.id)}", class: "client_name", id: "#{client.id}" %></td>
                      <% end %>
                  <% end %>
                </tr>
            <% end 
            end %>
          </table>
        </div>
    <% elsif params[:controller] == "promotions" || params[:controller] == "click_logs" || params[:controller] == "conversion_promotion_logs" %>
        <div id="promotions_list">
          <table class="sidebar">
            <% object.each_with_index do |promotion, index| %>
                <tr>
                  <th class="edit"><%= link_to "", "#{edit_promotion_path(promotion)}?client_id=#{params[:client_id]}", class: "edit", id: "edit#{promotion.id}" if current_user.super? || current_user.agency? %></th>
                  <% if (params[:promotion_id] && promotion.id == params[:promotion_id].to_i) || (!params[:promotion_id] && index == 0) %>
                      <td>
                        <% if params[:controller] == "click_logs" %>
                            <%= link_to short_name(promotion.promotion_name), "#{click_logs_path(promotion_id: promotion.id)}", class: "promotion_name active", id: "#{promotion.id}" %>
                        <% elsif params[:controller] == "conversion_promotion_logs" %>
                            <%= link_to short_name(promotion.promotion_name), "#{conversion_promotion_logs_path(promotion_id: promotion.id)}", class: "promotion_name active", id: "#{promotion.id}" %>
                        <% else %>
                            <%= link_to short_name(promotion.promotion_name), "#{promotions_path(promotion_id: promotion.id, client_id: params[:client_id])}", class: "promotion_name active", id: "#{promotion.id}" %>
                        <% end %>
                      </td>
                  <% else %>
                      <td>
                        <% if params[:controller] == "click_logs" %>
                            <%= link_to short_name(promotion.promotion_name), "#{click_logs_path(promotion_id: promotion.id)}", class: "promotion_name", id: "#{promotion.id}" %>
                        <% elsif params[:controller] == "conversion_promotion_logs" %>
                            <%= link_to short_name(promotion.promotion_name), "#{conversion_promotion_logs_path(promotion_id: promotion.id)}", class: "promotion_name", id: "#{promotion.id}" %>
                        <% else %>
                            <%= link_to short_name(promotion.promotion_name), "#{promotions_path(promotion_id: promotion.id, client_id: params[:client_id])}", class: "promotion_name", id: "#{promotion.id}" %>
                        <% end %>  </td>
                  <% end %>
                </tr>
            <% end %>
          </table>
        </div>
    <% elsif params[:controller] == "conversions" %>
        <div id="conversions_list">
          <table class="sidebar">
            <% 
            if object && object.count > 0
            object.each_with_index do |conversion, index| %>
                <tr>
                  <th class="edit"><%= link_to "", "#", class: "edit", id: "edit#{conversion.id}" if current_user.super? || current_user.agency? %></th>
                  <% if (params[:promotion_id] && conversion.id == params[:promotion_id].to_i) || (!params[:promotion_id] && index == 0) %>
                      <td><%= link_to short_name(conversion.conversion_name), "#{conversions_path(promotion_id: conversion.id)}", class: "conversion_name active", id: "#{conversion.id}" %></td>
                  <% else %>
                      <td><%= link_to short_name(conversion.conversion_name), "#{conversions_path(promotion_id: conversion.id)}", class: "conversion_name", id: "#{conversion.id}" %></td>
                  <% end %>
                </tr>
            <% end
            end%>
          </table>
        </div>
    <% end %>
  </div>
  <% if params[:controller] == "clients" && current_user.super? %>
      <%= link_to raw('<img src="/assets/btn_client_regist.gif">'), "#{new_client_path}", class: "new_client_name" %>
  <% elsif (current_user.super? || current_user.agency?) && params[:controller] == "promotions" %>
      <%= link_to raw('<img src="/assets/btn_promotion_regist.gif">'), "#{new_promotion_path(client_id: @client_id)}", class: "new_promotion_name"  %>
  <% elsif (current_user.super? || current_user.agency?) && params[:controller] == "conversions" %>
      <%= link_to raw('<img src="/assets/btn_conversion_regist.gif">'), "#{new_conversion_path(client_id: @client_id, promotion_id: params[:promotion_id])}", class: "new_conversion_name" %>
  <% end %>
</div>
