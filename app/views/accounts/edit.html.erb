<%= render "layouts/prevent_change_page_edit" %>
<%= stylesheet_link_tag "css/common" %>
<%= stylesheet_link_tag "css/accounts" %>
<ul class="contentNavi">
    <li class="pre"><%= link_to @promotion.client.client_name, clients_path(client_id: @promotion.client.id) %></li>
    <li>&gt;</li>
    <li class="pre"><%= link_to @promotion.promotion_name, promotions_path(client_id: @promotion.client.id, promotion_id: @promotion.id) %>
    <li>&gt;</li>
    <li><%= I18n.t("account.crumb_edit") %>/<%= t(Settings.media_category[@account.media_category_id])%>/<%= @account.media.media_name%> </li>
    <li>&gt;</li>
    <li><%= short_name(@account_name)%> </li>
</ul>
        
<% if flash[:success] %>
  <div><%= flash[:success] %></div>
<% end %>
<div id="account_form">
<%= form_for(@account) do |f| %>
    <div class="regist_form">
      <table class="account_info">
        <tr>
          <th> <%= f.label t("account.media_category") %></th>
          <td >
          	<input type="hidden" name="meida_category_id" id="meida_category_id" value="<%= @account.media_category_id %>" />
          	<input type="text" name="media_category" value="<%= t(Settings.media_category[@account.media_category_id])%>" disabled="disabled"></td>
        </tr>
        <tr>
          <th><%= f.label t("account.media") %></th>
          <td >
          	<input type="hidden" name="media_id" id="media_id" value="<%= @account.media_id %>" />
          	<input type="text" name="xmedia_id" value="<%= @account.media.media_name%>" disabled="disabled">
            </td>
        </tr>
        <tr>
          <th><%= f.label t("account.account_name") %></th>
          <td > <%= f.text_field :account_name, maxlength: 255, style: "width: 250px" %>  </td>
        </tr>
        <tr>
          <th><%= f.label t("account.roman_name") %></th>
          <td ><%= f.text_field :roman_name, maxlength: 255, style: "width: 250px" %></td>
        </tr>
        <tr>
          <th><%= f.label t("account.cost") %></th>
          <td ><%= I18n.t("account.input_data") %><%= f.text_field :cost, maxlength: 255, value: @account.cost, style: "width: 50px" %> %</td>
        </tr>
        <tr>
        	<td colspan="2">
        		<div id="account_sync_box">
        			<table>
        				<tr>
				          <th><%= f.label t("account.sync_account_id") %></th>
				          <td><%= f.radio_button :sync_flg, 1, checked: true, onclick: "active_sync_box();" %> <%= I18n.t("account.synchronism") %>
				            <%= f.radio_button :sync_flg, 0, onclick: "disable_sync_box();" %> <%= I18n.t("account.fractured") %></td>
				        </tr>
				        <tr>
				          <th></th>
				          <td>
				            <%= f.text_field :sync_account_id, maxlength: 255, style: "width: 250px", placeholder: " ID: " %>
				          </td>
				        </tr>
				        <tr>
				        <th></th>
				        <td>
				        	<%= f.password_field :sync_account_pw, maxlength: 255, value: @account.sync_account_pw, style: "width: 250px", placeholder: " PW: " %>
				        </tr>
        			</table>
        		</div>
        	</td>
        </tr> 
      </table>
      <div class="submit_area">
        <input type="image" id="btn_submit" src="/assets/btn_done.gif" >
        <%= link_to raw('<img align="right" alt="キャンセル" src="/assets/btn_cancel.gif">'), promotions_path(promotion_id: @promotion.id, client_id: @promotion.client.id) %>
      </div>
    </div>
    <input type="hidden" name="promotion_id" value="<%= @promotion.id %>">
<script type="text/javascript">
function disable_sync_box() {
	$("#account_sync_account_id").attr('disabled', true);
	$("#account_sync_account_pw").attr('disabled', true);
}
function active_sync_box() {
	$("#account_sync_account_id").removeAttr('disabled');
	$("#account_sync_account_pw").removeAttr('disabled');
}

jQuery(document).ready(function($) {
	$("#account_sync_flg_0").click(function() {
		if ($("#account_sync_flg_0").is(':checked')) {
			$("#account_sync_account_id").attr('disabled','disabled');
			$("#account_sync_account_pw").attr('disabled','disabled');
		}	
	});
	$("#account_sync_flg_1").click(function() {
		if ($("#account_sync_flg_1").is(':checked')) {
			$("#account_sync_account_id").removeAttr('disabled');
			$("#account_sync_account_pw").removeAttr('disabled');
		}	
	});
	
	if ($("#account_sync_flg_0").is(':checked')) {
		$("#account_sync_account_id").attr('disabled','disabled');
		$("#account_sync_account_pw").attr('disabled','disabled');
	}	
if ($('#media_id').val() < 7) {
	$("#account_sync_box").html('<%=j render "sync_box", f: f%>');
} else {
	$("#account_sync_box").html("");
	console.log('sss');
}


});	
</script>    
<% end %>
</div>
	
